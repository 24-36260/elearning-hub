{% extends "base.html" %}
{% block title %}{{ course.title }}{% endblock %}
{% block content %}

<div class="page-head" style="display:flex; justify-content:space-between; align-items:center; margin-bottom:20px;">
  <h1>{{ course.title }}</h1>
  <div>
    <a class="btn ghost" href="{{ url_for('courses') }}">‚Üê All Courses</a>
    {% if current_user.is_authenticated and current_user.role == 'admin' %}
      <a class="btn primary" href="{{ url_for('edit_course', course_id=course.id) }}">Edit Course</a>
      <a class="btn primary" href="{{ url_for('add_lesson', course_id=course.id) }}">Add Lesson</a>
    {% endif %}
  </div>
</div>

<div class="grid" style="display:grid; grid-template-columns:repeat(auto-fit, minmax(300px, 1fr)); gap:20px;">

  <!-- About this course -->
  <div class="card" style="grid-column:1 / -1; padding:20px; background:#f9f9f9; border-radius:12px; box-shadow:0 6px 12px rgba(0,0,0,0.1);">
    <h3>About this course</h3>
    <p class="muted" style="line-height:1.6;">{{ course.content }}</p>
  </div>

  <!-- Lessons -->
  <div class="card" style="padding:20px; background:#fff; border-radius:12px; box-shadow:0 4px 8px rgba(0,0,0,0.05);">
    <h3>Lessons</h3>
    {% if course.lessons %}
      <ol style="padding-left:20px;">
        {% for lesson in course.lessons %}
          <li style="margin-bottom:12px;">
            <strong>{{ lesson.title }}</strong>
            <div>
              <a href="{{ url_for('lesson_page', lesson_id=lesson.id) }}" 
                 style="
                   display:inline-block;
                   margin-top:4px;
                   padding:6px 14px;
                   background:#3B82F6;
                   color:#fff;
                   border-radius:8px;
                   text-decoration:none;
                   font-weight:600;
                   box-shadow:0 4px 6px rgba(0,0,0,0.15);
                   transition: transform 0.2s, box-shadow 0.2s;
                 "
                 onmouseover="this.style.transform='translateY(-3px)'; this.style.boxShadow='0 6px 12px rgba(0,0,0,0.2)';"
                 onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 6px rgba(0,0,0,0.15)';">
                Open Lesson
              </a>
            </div>
          </li>
        {% endfor %}
      </ol>
    {% else %}
      <p class="muted">No lessons yet.</p>
    {% endif %}
  </div>

  <!-- Quizzes -->
  <div class="card" style="padding:20px; background:#fff; border-radius:12px; box-shadow:0 4px 8px rgba(0,0,0,0.05);">
    <h3>Quizzes</h3>
    {% if course.quizzes %}
      <ul style="padding-left:20px;">
        {% for quiz in course.quizzes %}
          <li style="margin-bottom:8px;">
            {{ quiz.title }} &nbsp;
            {% if current_user.is_authenticated and current_user.role == 'admin' %}
              <a class="btn" style="background:#6B7280; color:#fff; padding:4px 8px; border-radius:6px; font-weight:600; text-decoration:none;" href="{{ url_for('edit_quiz', quiz_id=quiz.id) }}">Edit</a>
            {% else %}
              <a class="btn" style="background:#10B981; color:#fff; padding:4px 8px; border-radius:6px; font-weight:600; text-decoration:none;" href="{{ url_for('quiz_page', quiz_id=quiz.id) }}">Take Quiz</a>
            {% endif %}
          </li>
        {% endfor %}
      </ul>
    {% else %}
      <p class="muted">No quizzes yet.</p>
    {% endif %}
  </div>

</div>

{% endblock %}
